(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();let z=0,b=100;const T=20,S=10;function x(c){let e=0,a=0,s=0,t=0;const n=c.querySelector(".title-bar");c.onmousedown=function(d){(d.target===n||n.contains(d.target))&&o(d),i(c)};function o(d){d=d||window.event,d.preventDefault(),b++,c.style.zIndex=b,c.dataset.initialDrag||(c.dataset.initialLeft=c.style.left,c.dataset.initialTop=c.style.top,c.dataset.initialDrag="true"),s=d.clientX,t=d.clientY,document.onmouseup=u,document.onmousemove=r,c.classList.add("focused-window")}function i(d){b++,d.style.zIndex=b}function r(d){d=d||window.event,d.preventDefault(),e=s-d.clientX,a=t-d.clientY,s=d.clientX,t=d.clientY;let m=c.offsetTop-a,p=c.offsetLeft-e;const l=document.body.getBoundingClientRect();p<0&&(p=0),m<0&&(m=0),p+c.offsetWidth>l.width&&(p=l.width-c.offsetWidth),m+c.offsetHeight>l.height&&(m=l.height-c.offsetHeight),c.style.top=m+"px",c.style.left=p+"px"}function u(){c.classList.remove("dragging"),document.onmouseup=null,document.onmousemove=null,c.classList.remove("focused-window")}}function k(c){const s=z%S;let t,n;if(s<S)t=30+T*s,n=30+T*s;else{const o=s-S;t=30+T*(S+o),n=30+T*(S+o)}c.style.left=`${t}px`,c.style.top=`${n}px`,c.style.transform="none",b++,c.style.zIndex=b,z++}function q(c,e){const a=document.createElement("div");a.classList.add("title-bar");const s=document.createElement("div");s.classList.add("title-icon-div");const t=document.createElement("img");t.classList.add("title-bar-img"),t.src=e,t.alt="icon";const n=document.createElement("p");return n.classList.add("title-bar-text"),n.textContent=c,s.appendChild(t),s.appendChild(n),a.appendChild(s),a.appendChild(s),a}class F{constructor(e){this.size=e,this.cardData=this.#e(),this.gameElement=null,this.isProcessing=!1,this.#s(e)}#s(e){switch(e){case"4x4":this.playerLives=10;break;case"2x2":this.playerLives=2;break;case"2x4":this.playerLives=6;break;default:throw new Error("Invalid game size")}}#e(){const e=this.#c(this.size);return e.sort(()=>Math.random()-.5),e}#c(){const e=[{imgSrc:"./img/memory_game/0.png",name:"0"},{imgSrc:"./img/memory_game/1.png",name:"1"},{imgSrc:"./img/memory_game/2.png",name:"2"},{imgSrc:"./img/memory_game/3.png",name:"3"},{imgSrc:"./img/memory_game/4.png",name:"4"},{imgSrc:"./img/memory_game/5.png",name:"5"},{imgSrc:"./img/memory_game/6.png",name:"6"},{imgSrc:"./img/memory_game/7.png",name:"7"},{imgSrc:"./img/memory_game/0.png",name:"0"},{imgSrc:"./img/memory_game/1.png",name:"1"},{imgSrc:"./img/memory_game/2.png",name:"2"},{imgSrc:"./img/memory_game/3.png",name:"3"},{imgSrc:"./img/memory_game/4.png",name:"4"},{imgSrc:"./img/memory_game/5.png",name:"5"},{imgSrc:"./img/memory_game/6.png",name:"6"},{imgSrc:"./img/memory_game/7.png",name:"7"}];let a;switch(this.size){case"4x4":a=8;break;case"2x2":a=2;break;case"2x4":a=4;break;default:throw new Error("invalid size")}const s=e.slice(0,a);return s.concat(s)}CreateGame(){const e=document.createElement("div");e.classList.add("window");const a=q("Memory Game","./img/memory.png"),s=document.createElement("button");s.classList.add("close_button"),s.innerHTML='<img src="img/close2.png" alt="close icon">',s.addEventListener("click",()=>{e.remove()}),a.appendChild(s),e.appendChild(a),this.gameElement=e;const t=document.createElement("div");t.classList.add("memory_game");const n=document.createElement("div");n.classList.add("game_header");const o=document.createElement("div");o.classList.add("lives_and_button_div"),n.appendChild(o);const i=document.createElement("button");i.classList.add("reset_button"),i.textContent="Reset",i.addEventListener("click",()=>{this.#t(!1)});const r=document.createElement("div");r.classList.add("lives_div");const u=document.createElement("h1");u.classList.add("player_lives_count"),r.appendChild(u),o.appendChild(r),o.appendChild(i);const d=document.createElement("section");this.section=d,this.#o(this.size,d),this.#e().forEach(p=>{const l=document.createElement("div"),g=document.createElement("img"),f=document.createElement("img");l.classList="memory_card",g.classList="face",f.classList="back",g.src=p.imgSrc,l.setAttribute("name",p.name),f.src="./img/memory_game/question_mark.png",f.setAttribute("name","question_mark"),l.setAttribute("tabindex","0"),d.appendChild(l),l.appendChild(g),l.appendChild(f),l.addEventListener("click",h=>{!l.classList.contains("flipped")&&!this.isProcessing&&(l.classList.toggle("togglCard"),this.#a(h,l))}),l.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&!l.classList.contains("matched")&&!l.classList.contains("flipped")&&!this.isProcessing&&(l.classList.toggle("togglCard"),this.#a(h,l))})}),t.appendChild(n),t.appendChild(d),e.appendChild(t),document.querySelector("main").appendChild(e),x(e),k(e),u.textContent=`${"💘".repeat(this.playerLives)}`,this.#n(),this.#d()}#o(e,a){switch(e){case"4x4":a.style.gridTemplateColumns="repeat(4, 8rem)",a.style.gridTemplateRows="repeat(4, 8rem)";break;case"2x2":a.style.gridTemplateColumns="repeat(2, 8rem)",a.style.gridTemplateRows="repeat(2, 8rem)";break;case"2x4":a.style.gridTemplateColumns="repeat(4, 8rem)",a.style.gridTemplateRows="repeat(2, 8rem)";break;default:throw new Error("Invalid game size")}}#a(e,a){if(this.isProcessing||a.classList.contains(".flipped"))return;a.classList.add("flipped");const s=this.gameElement.querySelectorAll(".flipped"),t=this.gameElement.querySelectorAll(".togglCard");s.length===2&&(this.isProcessing=!0,s[0].getAttribute("name")===s[1].getAttribute("name")?(s.forEach(n=>{n.classList.remove("flipped"),n.style.pointerEvents="none",n.classList.add("matched")}),this.isProcessing=!1):setTimeout(()=>{this.gameElement.querySelectorAll(".memory_card").forEach(n=>{n.classList.contains("matched")||(n.classList.remove("flipped","togglCard"),n.style.pointerEvents="auto")}),this.playerLives--,this.gameElement.querySelector(".lives_div").classList.add("shake"),setTimeout(()=>{this.gameElement.querySelector(".lives_div").classList.remove("shake")},500),this.gameElement.querySelector(".player_lives_count").textContent=`${"💘".repeat(this.playerLives)}`,this.playerLives===0&&setTimeout(()=>this.#t(!1),500),this.isProcessing=!1},1e3),setTimeout(()=>{t.forEach(n=>{n.classList.contains("matched")||(n.style.pointerEvents="auto")})},1e3)),setTimeout(()=>{const n=this.cardData.length/2;t.length===n*2&&this.#t(!0)},1e3)}#t(e){this.#s(this.size),this.gameElement.querySelector(".player_lives_count").textContent=`${"💘".repeat(this.playerLives)}`;const a=this.#e(),s=this.gameElement.querySelectorAll(".face"),t=this.gameElement.querySelectorAll(".memory_card");this.section.style.pointerEvents="none",a.forEach((n,o)=>{t[o].classList.remove("togglCard","matched"),setTimeout(()=>{t[o].style.pointerEvents="all",s[o].src=n.imgSrc,t[o].setAttribute("name",n.name),this.section.style.pointerEvents="all"},1e3)}),setTimeout(()=>this.#i(e),500),this.#n()}#i(e){const a=this.gameElement.querySelector(".game_header"),s=document.createElement("div"),t=document.createElement("h1");t.classList.add("feedback_message"),t.textContent=e?this.#r():"Try again! 😥",s.classList.add("feed_back_div"),s.appendChild(t),a.appendChild(s),setTimeout(()=>{s.remove()},1e3),this.#n()}#r(){switch(this.size){case"4x4":return"Nice Memory! 😎";case"2x2":return"100% winnable! 😏";case"2x4":return"good job! 😎";default:throw new Error("Invalid game size")}}#n(){const e=this.gameElement.querySelector(".memory_card");e&&e.focus()}#d(){const e=this.gameElement.querySelectorAll(".memory_card"),a=this.#l();e.forEach((s,t)=>{s.addEventListener("keydown",n=>{switch(n.key){case"ArrowRight":(t+1)%a!==0&&e[t+1]?.focus();break;case"ArrowLeft":t%a!==0&&e[t-1]?.focus();break;case"ArrowUp":e[t-a]?.focus();break;case"ArrowDown":e[t+a]?.focus();break}})})}#l(){switch(this.size){case"4x4":return 4;case"2x2":return 2;case"2x4":return 4;default:return 4}}}function X(c){const e=document.createElement("div");e.classList.add("window"),e.id="input_box";const a=q(c,"img/memory.png"),s=document.createElement("button");s.classList.add("close_button"),s.innerHTML='<img src="img/close2.png" alt="close icon">',s.addEventListener("click",()=>{e.remove()}),a.appendChild(s),e.appendChild(a);const t=document.createElement("div");t.id="input_box",t.classList.add("user_box");const n=document.createElement("form");n.addEventListener("submit",u);const o=document.createElement("label");o.textContent="Enter the game grid: ";const i=document.createElement("input");i.type="text",i.placeholder="choose: 2x2, 2x4, 4x4";const r=document.createElement("button");r.type="submit",r.classList.add("button"),r.textContent="Submit!",n.appendChild(o),n.appendChild(i),n.appendChild(r),t.appendChild(n),e.appendChild(t),document.querySelector("main").appendChild(e),i.focus(),x(e),k(e);function u(d){d.preventDefault();const m=i.value.trim();if(!["2x2","2x4","4x4"].includes(m)){alert("Please enter a valid game grid!");return}e.remove(),new F(m).CreateGame()}}function $(c){localStorage.setItem("sy222ea_UserName",c)}function Y(){return localStorage.getItem("sy222ea_UserName")||""}function N(c){localStorage.setItem("sy222ea_Messages",JSON.stringify(c))}function K(){const c=localStorage.getItem("sy222ea_Messages");return c?JSON.parse(c):[]}const j="wss://courselab.lnu.se/message-app/socket",J="eDBE76deU7L0H9mEBgxUKVR0VCnq0XBd";let y="",_,v=[],W=!1;function V(){_||(_=new WebSocket(j),_.onopen=function(){console.log("WebSocket connection established")},_.onerror=function(c){console.error("WebSocket error:",c)},_.onclose=function(c){console.log("WebSocket connection closed:",c)},_.onmessage=function(c){const e=JSON.parse(c.data),{type:a,data:s,username:t}=e;a==="message"&&t!==y&&(v.push({username:t,messageData:s}),N(v),document.querySelectorAll(".chat_body").forEach(n=>{const o=document.createElement("div");o.classList.add("message_box");const i=document.createElement("div");i.classList.add("message"),i.textContent=s;const r=document.createElement("span");r.classList.add("server_name"),r.textContent=e.username;const u=document.createElement("div");u.classList.add("name_container"),u.appendChild(r),o.appendChild(u.cloneNode(!0)),o.appendChild(i),n.appendChild(o.cloneNode(!0)),n.scrollTop=n.scrollHeight}))})}function Z(){y=Y(),y===""?Q("Name Submission"):G("Chat")}function Q(c){if(W){alert("You already have a submission window open!");return}const e=document.createElement("div");e.classList.add("window"),e.id="user_info";const a=q(c,"img/chat.png"),s=document.createElement("button");s.classList.add("close_button"),s.innerHTML='<img src="img/close2.png" alt="close icon">',s.addEventListener("click",()=>{e.remove(),W=!1}),a.appendChild(s),e.appendChild(a);const t=document.createElement("div");t.id="user_info",t.classList.add("user_box");const n=document.createElement("form"),o=document.createElement("label");o.htmlFor="user_name",o.textContent="Enter a nickname: ";const i=document.createElement("input");i.type="text",i.id="user_name",i.name="user_name";const r=document.createElement("button");r.type="submit",r.id="submit_name",r.classList.add("button"),r.textContent="Submit!",n.appendChild(o),n.appendChild(i),n.appendChild(r),t.appendChild(n),e.appendChild(t),document.querySelector("main").appendChild(e),x(e),document.querySelector("#submit_name").addEventListener("click",()=>{y=document.querySelector("#user_name").value,y===""?alert("Please enter a valid name!"):($(y),document.querySelector("#user_info").remove(),G("Chat"))}),document.querySelector("#user_name").focus(),W=!0,k(e)}function G(c){const e=document.createElement("div");e.classList.add("window"),e.classList.add("chat_window");const a=q(c,"img/chat.png"),s=document.createElement("button");s.classList.add("close_button"),s.innerHTML='<img src="img/close2.png" alt="close icon">',s.addEventListener("click",()=>{e.remove()}),a.appendChild(s),e.appendChild(a);const t=document.createElement("div");t.classList.add("chat_container");const n=document.createElement("div");n.classList.add("chat_header");const o=document.createElement("button");o.classList.add("change_name_button"),o.textContent="Change name",o.addEventListener("click",te);const i=document.createElement("button");i.classList.add("clear_chat_button"),i.textContent="Clear chat",i.addEventListener("click",()=>{N([]),document.querySelectorAll(".chat_body").forEach(g=>{g.innerHTML=""})}),n.appendChild(o),n.appendChild(i);const r=document.createElement("div");r.classList.add("chat_body"),v=K(),ee(r);const u=document.createElement("div");u.classList.add("chat_footer");const d=document.createElement("form"),m=document.createElement("input");m.type="text",m.name="",m.classList.add("chat_input");const p=document.createElement("button");p.textContent="SEND",p.classList.add("send_message_button"),d.appendChild(m),d.appendChild(p),u.appendChild(d),t.appendChild(n),t.appendChild(r),t.appendChild(u),e.appendChild(t),document.querySelector("main").appendChild(e),e.querySelector(".chat_input").focus(),x(e),k(e),V(),e.querySelector(".send_message_button").addEventListener("click",g=>{g.preventDefault();const f=g.target.closest(".chat_window").querySelector(".chat_input").value;ne(f);const h=document.createElement("div");h.classList.add("message_box"),h.classList.add("user_message_box");const C=document.createElement("div");C.classList.add("message"),C.classList.add("user_message"),C.textContent=f;const E=document.createElement("span");E.classList.add("user_name"),E.textContent=y;const L=document.createElement("div");L.classList.add("name_container"),L.appendChild(E),h.appendChild(C),h.appendChild(L.cloneNode(!0)),g.target.closest(".chat_window").querySelector(".chat_input").value="",document.querySelectorAll(".chat_body").forEach(w=>{w.appendChild(h.cloneNode(!0))})}),r.scrollTop=r.scrollHeight}function ee(c){v.forEach(e=>{const a=document.createElement("div");a.classList.add("message_box");const s=document.createElement("div");s.classList.add("message"),s.textContent=e.messageData;const t=document.createElement("span"),n=document.createElement("div");n.classList.add("name_container"),e.username===y?(a.classList.add("user_message_box"),s.classList.add("user_message"),t.classList.add("user_name"),a.appendChild(s),a.appendChild(n)):(t.classList.add("server_name"),a.appendChild(n),a.appendChild(s)),t.textContent=e.username,n.appendChild(t),c.appendChild(a)})}function te(c){c.preventDefault();const a=c.target.closest(".chat_window").querySelector(".clear_chat_button");a.style.display="none";const s=c.target;s.style.display="none";const t=document.createElement("input");t.type="text",t.id="new_user_name",t.placeholder="New name";const n=document.createElement("button");n.textContent="Submit",n.addEventListener("click",()=>{const i=t.value;i===""?alert("Please enter a valid name!"):(O(i),t.remove(),n.remove(),s.style.display="block")}),t.addEventListener("keydown",i=>{if(i.key==="Enter"){const r=t.value;r===""?alert("Please enter a valid name!"):(O(r),t.remove(),n.remove(),s.style.display="block",a.style.display="block")}});const o=this.closest(".chat_header");o.appendChild(t),o.appendChild(n),t.focus()}function O(c){const e=y;y=c,$(y),v=v.map(a=>a.username===e?{...a,username:c}:a),document.querySelectorAll(".user_name").forEach(a=>{a.textContent=c}),N(v)}function ne(c){const e={type:"message",data:c,username:y,channel:"my, not so secret, channel",key:J};v.push({username:y,messageData:c}),N(v),_.send(JSON.stringify(e)),setTimeout(()=>{document.querySelectorAll(".chat_body").forEach(a=>{a.scrollTop=a.scrollHeight})},0)}const se="c663b54cc99b1b7eb1fc579db6049404",ae="https://api.openweathermap.org/data/2.5/weather?units=metric&q=";function ce(c){const e=document.createElement("div");e.classList.add("window");const a=q(c,"img/weather/Mist.png"),s=document.createElement("button");s.classList.add("close_button"),s.innerHTML='<img src="img/close2.png" alt="close icon">',s.addEventListener("click",()=>{e.remove()}),a.appendChild(s),e.appendChild(a);const t=document.createElement("div");t.classList.add("card");const n=document.createElement("div");n.classList.add("search");const o=document.createElement("input");o.type="text",o.placeholder="Enter city name...",o.spellcheck=!1;const i=document.createElement("button"),r=document.createElement("img");r.src="img/weather/search.png",r.alt="search icon",i.appendChild(r),n.appendChild(o),n.appendChild(i),t.appendChild(n);const u=document.createElement("div");u.classList.add("error");const d=document.createElement("p");d.textContent="Invalid city name!",u.appendChild(d),t.appendChild(u);const m=document.createElement("div");m.classList.add("weather");const p=document.createElement("img");p.src="img/weather/Rain.png",p.classList.add("weather_icon"),p.alt="weather icon";const l=document.createElement("h1");l.classList.add("temp"),l.textContent="22°C";const g=document.createElement("h2");g.classList.add("city"),g.textContent="Haifa";const f=document.createElement("h2");f.classList.add("weather_status"),f.textContent="Rainy";const h=document.createElement("div");h.classList.add("details");const C=document.createElement("div");C.classList.add("col");const E=document.createElement("img");E.src="img/weather/humidity.png",E.alt="humidity icon";const L=document.createElement("div"),w=document.createElement("p");w.classList.add("humidity"),w.textContent="50%";const P=document.createElement("p");P.textContent="Humidity",L.appendChild(w),L.appendChild(P),C.appendChild(E),C.appendChild(L);const B=document.createElement("div");B.classList.add("col");const D=document.createElement("img");D.src="img/weather/wind.png",D.alt="wind icon";const A=document.createElement("div"),M=document.createElement("p");M.classList.add("wind"),M.textContent="15 km/h";const H=document.createElement("p");H.textContent="Wind speed",A.appendChild(M),A.appendChild(H),B.appendChild(D),B.appendChild(A),h.appendChild(C),h.appendChild(B),m.appendChild(p),m.appendChild(l),m.appendChild(g),m.appendChild(f),m.appendChild(h),t.appendChild(m),e.appendChild(t),x(e),document.querySelector("main").appendChild(e),i.addEventListener("click",()=>{const I=o.value;R(I,e)}),o.addEventListener("keydown",I=>{if(I.key==="Enter"){const U=o.value;R(U,e)}}),k(e),o.focus()}async function R(c,e){const a=await fetch(`${ae}${c}&appid=${se}`);if(!a.ok)e.querySelector(".error").style.display="block",e.querySelector(".weather").style.display="none";else{const s=await a.json();e.querySelector(".city").textContent=s.name,e.querySelector(".temp").textContent=Math.round(s.main.temp)+"°C",e.querySelector(".weather_status").textContent=s.weather[0].main,e.querySelector(".humidity").textContent=s.main.humidity+"%",e.querySelector(".wind").textContent=s.wind.speed+"km/h",e.querySelector(".weather_icon").src=`img/weather/${s.weather[0].main}.png`,e.querySelector(".weather").style.display="block",e.querySelector(".error").style.display="none"}}document.querySelector(".start_memory").addEventListener("click",()=>X("Memory Game"));document.querySelector(".start_chat").addEventListener("click",()=>Z());document.querySelector(".start_weather").addEventListener("click",()=>ce("Weather App"));
